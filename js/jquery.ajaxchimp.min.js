(function($){"use strict";$.ajaxChimp={responses:{"We have sent you a confirmation email":0,"Please enter a value":1,"An email address must contain a single @":2,"The domain portion of the email address is invalid (the portion after the @: )":3,"The username portion of the email address is invalid (the portion before the @: )":4,"This email address looks fake or invalid. Please enter a real email address":5},translations:{en:null},init:function(selector,options){$(selector).ajaxChimp(options)}};$.fn.ajaxChimp=function(options){$(this).each(function(i,elem){var form=$(elem);var email=form.find("input[type=email]");var label=form.find("label[for="+email.attr("id")+"]");var settings=$.extend({url:form.attr("action"),language:"en"},options);var url=settings.url.replace("/post?","/post-json?").concat("&c=?");form.attr("novalidate","true");email.attr("name","EMAIL");form.submit(function(){var msg;function successCallback(resp){if(resp.result==="success"){msg="We have sent you a confirmation email";label.removeClass("error").addClass("valid");email.removeClass("error").addClass("valid")}else{email.removeClass("valid").addClass("error");label.removeClass("valid").addClass("error");var index=-1;try{var parts=resp.msg.split(" - ",2);if(parts[1]===undefined){msg=resp.msg}else{var i=parseInt(parts[0],10);if(i.toString()===parts[0]){index=parts[0];msg=parts[1]}else{index=-1;msg=resp.msg}}}catch(e){index=-1;msg=resp.msg}}if(settings.language!=="en"&&$.ajaxChimp.responses[msg]!==undefined&&$.ajaxChimp.translations&&$.ajaxChimp.translations[settings.language]&&$.ajaxChimp.translations[settings.language][$.ajaxChimp.responses[msg]]){msg=$.ajaxChimp.translations[settings.language][$.ajaxChimp.responses[msg]]}label.html(msg);label.show(2e3);if(settings.callback){settings.callback(resp)}}var data={};var dataArray=form.serializeArray();$.each(dataArray,function(index,item){data[item.name]=item.value});$.ajax({url:url,data:data,success:successCallback,dataType:"jsonp",error:function(resp,text){console.log("mailchimp ajax submit error: "+text)}});var submitMsg="Submitting...";if(settings.language!=="en"&&$.ajaxChimp.translations&&$.ajaxChimp.translations[settings.language]&&$.ajaxChimp.translations[settings.language]["submit"]){submitMsg=$.ajaxChimp.translations[settings.language]["submit"]}label.html(submitMsg).show(2e3);return false})});return this}})(jQuery$(document).ready(function() {

  "use strict";
/***************************************************************************/
/* PARALLAX */
/***************************************************************************/
$(window).stellar({
    horizontalScrolling: false 
});



/***************************************************************************/
/* CUSTOMIZABLE SCROLLBAR */
/***************************************************************************/
$("html").niceScroll({
    mousescrollstep: 40,
    cursorcolor: "#1abc9c",
    zindex: 9999,
    cursorborder: "none",
    cursorwidth: "6px",
    cursorborderradius: "none"
});



/***************************************************************************/
/* NAVIGATION SCROLL */
/***************************************************************************/
$('.main-navigation').onePageNav({
    scrollThreshold: 0.2, // Adjust if Navigation highlights too early or too late
    scrollSpeed: 1000,
    scrollOffset: 60 //Height of Navigation Bar
});


/* DOWNLOAD AND LEARN MORE BUTTON SCROLL FROM HOME PAGE */
$('.home-btn').localScroll({
    offset: -60 //Height of Navigation Bar
});



/***************************************************************************/
/* CONTACT SECTION EXPEND FROM NAVBAR CONTACT MENU */
/***************************************************************************/
$(".main-navigation .contact").click(function() {
    $('#section10').collapse('show');
});

 

/***************************************************************************/
/* SMOOTH SCROLL / CURRENTLY ENABLED IN niceScroll */
/***************************************************************************/

/*

var scrollAnimationTime = 1200,
    scrollAnimation = 'easeInOutExpo';

$('a.scrollto').bind('click.smoothscroll', function (event) {
    event.preventDefault();
    var target = this.hash;
    
    $('html, body').stop().animate({
        'scrollTop': $(target).offset().top
    }, scrollAnimationTime, scrollAnimation, function () {
        window.location.hash = target;
    });
});

*/



/***************************************************************************/
/* MAILCHIMP NEWSLETTER SUBSCRIPTION */
/***************************************************************************/
$(".mailchimp-subscribe").ajaxChimp({
    callback: mailchimpCallback,
    url: "http://bdpark.us7.list-manage1.com/subscribe/post?u=d6649e6cfae99f3bc710a85a5&id=07db0b4bd6" // Replace your mailchimp post url inside double quote "".  
});

function mailchimpCallback(resp) {
     if(resp.result === 'success') {
        $('.subscription-success')
            .html('<i class="icon_check_alt2"></i>' + resp.msg)
            .delay(500)
            .fadeIn(1000);

        $('.subscription-failed').fadeOut(500);
        
    } else if(resp.result === 'error') {
        $('.subscription-failed')
            .html('<i class="icon_close_alt2"></i>' + resp.msg)
            .delay(500)
            .fadeIn(1000);
            
        $('.subscription-success').fadeOut(500);
    }  
};



// Function for email address validation
function isValidEmail(emailAddress) {

var pattern = new RegExp(/^(("[\w-\s]+")|([\w-]+(?:\.[\w-]+)*)|("[\w-\s]+")([\w-]+(?:\.[\w-]+)*))(@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$)|(@\[?((25[0-5]\.|2[0-4][0-9]\.|1[0-9]{2}\.|[0-9]{1,2}\.))((25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\.){2}(25[0-5]|2[0-4][0-9]|1[0-9]{2}|[0-9]{1,2})\]?$)/i);

    return pattern.test(emailAddress);

};



/***************************************************************************/
/* LOCAL NEWSLETTER SUBSCRIPTION */
/***************************************************************************/
$("#local-subscribe").submit(function(e) {
    e.preventDefault();
    var data = {
        email: $("#subscriber-email").val()
    };

    if ( isValidEmail(data['email']) ) {
        $.ajax({
            type: "POST",
            url: "subscribe/subscribe.php",
            data: data,
            success: function() {
                $('.subscription-success').fadeIn(1000);
                $('.subscription-failed').fadeOut(500);
            }
        });
    } else {
        $('.subscription-failed').fadeIn(1000);
        $('.subscription-success').fadeOut(500);
    }

    return false;
});



/***************************************************************************/
/* CONTACT FORM */
/***************************************************************************/
$("#contact").submit(function(e) {
    e.preventDefault();
    var data = {
        name: $("#name").val(),
        email: $("#email").val(),
        message: $("#message").val()
    };

    if ( isValidEmail(data['email']) && (data['message'].length > 1) && (data['name'].length > 1) ) {
        $.ajax({
            type: "POST",
            url: "sendmail.php",
            data: data,
            success: function() {
                $('.email-success').delay(500).fadeIn(1000);
                $('.email-failed').fadeOut(500);
            }
        });
    } else {
        $('.email-failed').delay(500).fadeIn(1000);
        $('.email-success').fadeOut(500);
    }

    return false;
});



/***************************************************************************/
/* WOW ANIMATION */
/***************************************************************************/
var wow = new WOW({ mobile: false });

wow.init();



/***************************************************************************/
/* SCREENSHOT SLIDER */
/***************************************************************************/
var screenshots = $("#owl-screenshots");

screenshots.owlCarousel({
    items : 4, // 4 items above 1201px browser width
    itemsDesktop : [1200,4], // 4 items between 1200px and 993px
    itemsDesktopSmall : [992,3], // 3 items betweem 992px and 769px
    itemsTablet: [768,3], // 3 items between 768 and 601
    itemsTabletSmall : [480,2], // 2 items in widen mobile device
    itemsMobile : [320,1] // 1 items in any small mobile device
});



/***************************************************************************/
/* TESTIMONIAL SYNC WITH CLIENTS */
/***************************************************************************/
var sync1 = $("#sync1"); // client's message
var sync2 = $("#sync2"); // client's avatar

sync1.owlCarousel({
  singleItem : true,
  slideSpeed : 1000,
  navigation: false,
  pagination:false,
  afterAction : syncPosition,
  responsiveRefreshRate : 200,
  autoPlay: 5000
});


sync2.owlCarousel({
  items : 3,        //# clients image will displace in single display
  itemsDesktop      : [1200,3],
  itemsDesktopSmall     : [992,3],
  itemsTablet       : [768,2],
  itemsTabletSmall       : [480,2],
  itemsMobile       : [320,1],
  pagination:false,
  responsiveRefreshRate : 100,
  afterInit : function(el){
    el.find(".owl-item").eq(0).addClass("synced");
  }
});

function syncPosition(el){
  var current = this.currentItem;
  $("#sync2")
    .find(".owl-item")
    .removeClass("synced")
    .eq(current)
    .addClass("synced")
  if($("#sync2").data("owlCarousel") !== undefined){
    center(current)
  }
}

$("#sync2").on("click", ".owl-item", function(e){
  e.preventDefault();
  var number = $(this).data("owlItem");
  sync1.trigger("owl.goTo",number);
});

function center(number){
  var sync2visible = sync2.data("owlCarousel").owl.visibleItems;
  var num = number;
  var found = false;
  for(var i in sync2visible){
    if(num === sync2visible[i]){
      var found = true;
    }
  }

  if(found===false){
    if(num>sync2visible[sync2visible.length-1]){
      sync2.trigger("owl.goTo", num - sync2visible.length+2)
    }else{
      if(num - 1 === -1){
        num = 0;
      }
      sync2.trigger("owl.goTo", num);
    }
  } else if(num === sync2visible[sync2visible.length-1]){
    sync2.trigger("owl.goTo", sync2visible[1])
  } else if(num === sync2visible[0]){
    sync2.trigger("owl.goTo", num-1)
  }
}



/***************************************************************************/
/* OUR OTHER APPS */
/***************************************************************************/
$("#our-other-apps").owlCarousel({
 
    navigation : false, // Show next and prev buttons
    slideSpeed : 300,
    paginationSpeed : 400,
    singleItem:true

});
 
});


/* =================================
===  Bootstrap Internet Explorer 10 in Windows 8 and Windows Phone 8 FIX
=================================== */
if (navigator.userAgent.match(/IEMobile\/10\.0/)) {
  var msViewportStyle = document.createElement('style')
  msViewportStyle.appendChild(
    document.createTextNode(
      '@-ms-viewport{width:auto!important}'
    )
  )
  document.querySelector('head').appendChild(msViewportStyle)
}



/***************************************************************************/
/* FULLSCREEN HOME SECTION */
/***************************************************************************/
var fullscreen_home = function(){
  if(matchMedia( "(min-width: 768px) and (min-height: 500px)" ).matches) {
      var height = $(window).height() + "px";
      $(".header").css('min-height', height);
  }
}

$(document).ready(fullscreen_home);
$(window).resize(fullscreen_home);